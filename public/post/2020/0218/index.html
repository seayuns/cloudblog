<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    <meta property="og:site_name" content="SeaYuns Space">
    <meta property="og:type" content="article">

    
    <meta property="og:image" content="http://seayuns.github.io/img/sea.png">
    <meta property="twitter:image" content="http://seayuns.github.io/img/sea.png" />
    

    
    <meta name="title" content="phxpaxos 项目的演示和实验" />
    <meta property="og:title" content="phxpaxos 项目的演示和实验" />
    <meta property="twitter:title" content="phxpaxos 项目的演示和实验" />
    

    
    <meta name="description" content="Gopher">
    <meta property="og:description" content="Gopher" />
    <meta property="twitter:description" content="Gopher" />
    

    
    <meta property="twitter:card" content="summary" />
    
    

    <meta name="keyword"  content="Cepher, Gopher, 云存储, 云原生, Kubernetes">
    <link rel="shortcut icon" href="/img/favicon/favicon.ico">

    <title>phxpaxos 项目的演示和实验-Seayuns 博客 | Seayuns Blog</title>

    <link rel="canonical" href="/post/2020/0218/">

    <link rel="stylesheet" href="/css/iDisqus.min.css"/>

    
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    
    <link rel="stylesheet" href="/css/hugo-theme-cleanwhite.min.css">

    
    <link rel="stylesheet" href="/css/zanshang.css">

    
    <link href="//cdn.bootcdn.net/ajax/libs/font-awesome/5.15.1/css/all.min.css" rel="stylesheet" type="text/css">

    
    

    
    
    <script src="/js/jquery.min.js"></script>

    
    <script src="/js/bootstrap.min.js"></script>

    
    <script src="/js/hux-blog.min.js"></script>

    
    

</head>




<nav class="navbar navbar-default navbar-custom navbar-fixed-top">

    <div class="container-fluid">
        
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">SeaYuns Space</a>
        </div>

        
        
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">首页</a>
                    </li>

                    
                    
		           
                        <li><a href="/categories/%e5%ad%98%e5%82%a8%e7%b3%bb%e5%88%97">存储系列</a></li>
                    
                        <li><a href="/categories/%e5%ae%b9%e5%99%a8%e7%b3%bb%e5%88%97">容器系列</a></li>
                    
                        <li><a href="/categories/%e4%ba%91%e6%8b%9b%e8%81%98">云招聘</a></li>
                    
                        <li><a href="/archive/">日积月累</a></li>
                    
                        <li><a href="/about/">关于博主</a></li>
                    


                    

                </ul>
            </div>
        </div>
        
    </div>
    
</nav>
<script>
    
    
    
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        
            $navbar.className = " ";
            
            setTimeout(function(){
                
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>




<style type="text/css">
    header.intro-header {
        background-image: url('/img/sea.png')
    }
</style>

<header class="intro-header" >

    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                        <a class="tag" href="/tags/phxpaxos" title="phxpaxos">
                            phxpaxos
                        </a>
                        
                        <a class="tag" href="/tags/%E5%85%B1%E8%AF%86%E7%AE%97%E6%B3%95" title="共识算法">
                            共识算法
                        </a>
                        
                    </div>
                    <h1>phxpaxos 项目的演示和实验</h1>
                    <h2 class="subheading"></h2>
                    <span class="meta">
                        
                            Posted by  
                            
                                    SeaYuns Space
                             
                            on 
                            Tuesday, February 18, 2020
                            
                                | <span id="/post/2020/0218/" class="leancloud_visitors meta_data_item" data-flag-title="">
    <span class="post-meta-item-icon">
      <span class="octicon octicon-eye"></span> 
    </span>
    <i class="fa fa-eye"></i>
    <span class="old-visitors-count" style="display: none;"></span>
    <span class="leancloud-visitors-count"></span>
</span>
                            
                            
                            <span class="post-date">
                                | 共836字
                            </span>，阅读约
                            <span class="more-meta"> 
                                4 分钟
                            </span>
                            
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>




<article>
    <div class="container">
        <div class="row">

            
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                
                <h2 id="linux环境配置">linux环境配置</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">helloworld@Vostro:~/Downloads/automake-1.14$ uname -a
Linux Vostro 5.3.0-40-generic <span style="color:#6272a4">#32~18.04.1-Ubuntu SMP Mon Feb 3 14:05:59 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux</span>
helloworld@Vostro:~$ cat /etc/lsb-release 
<span style="color:#8be9fd;font-style:italic">DISTRIB_ID</span><span style="color:#ff79c6">=</span>Ubuntu
<span style="color:#8be9fd;font-style:italic">DISTRIB_RELEASE</span><span style="color:#ff79c6">=</span>18.04
<span style="color:#8be9fd;font-style:italic">DISTRIB_CODENAME</span><span style="color:#ff79c6">=</span>bionic
<span style="color:#8be9fd;font-style:italic">DISTRIB_DESCRIPTION</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;Ubuntu 18.04.4 LTS&#34;</span>
</code></pre></div><h2 id="下载--phpaxos-源码">下载  phpaxos 源码</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git clone https://github.com/Tencent/phxpaxos.git  --recursive
</code></pre></div><p>下载过程中, 可能会报这样的错, 在运行git clone命令时很容易出现这个错误，这是下载的包太大，网速慢超时报错。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git clone https://github.com/Tencent/phxpaxos.git  --recursive
...
git clone error RPC failed:curl <span style="color:#bd93f9">56</span> GnuTLS recv error <span style="color:#ff79c6">(</span>-54<span style="color:#ff79c6">)</span>:Error in the pull <span style="color:#ff79c6">function</span>
fatar: The remote end hung up unexpectedly
fatal : early EOF
fatal : index-pack failed
...
</code></pre></div><p>可通过更改设置解决,  <code>git config -l</code>  查看配置</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">- httpBuffer加大    
git config --global http.postBuffer <span style="color:#bd93f9">524288000</span>

- 压缩配置
git config --global core.compression -1    

- 修改配置文件.bashrc
<span style="color:#8be9fd;font-style:italic">export</span> <span style="color:#8be9fd;font-style:italic">GIT_TRACE_PACKET</span><span style="color:#ff79c6">=</span><span style="color:#bd93f9">1</span>
<span style="color:#8be9fd;font-style:italic">export</span> <span style="color:#8be9fd;font-style:italic">GIT_TRACE</span><span style="color:#ff79c6">=</span><span style="color:#bd93f9">1</span>
<span style="color:#8be9fd;font-style:italic">export</span> <span style="color:#8be9fd;font-style:italic">GIT_CURL_VERBOSE</span><span style="color:#ff79c6">=</span><span style="color:#bd93f9">1</span>
</code></pre></div><h2 id="环境编译">环境编译</h2>
<h3 id="依赖关系">依赖关系</h3>
<p>看一下各目录的依赖关系。如下：</p>
<table>
<thead>
<tr>
<th style="text-align:left">目录</th>
<th style="text-align:left">编译对象</th>
<th style="text-align:left">内部依赖</th>
<th style="text-align:left">第三方库依赖</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">根目录</td>
<td style="text-align:left">libphxpaxos.a</td>
<td style="text-align:left">无</td>
<td style="text-align:left">protobuf,leveldb</td>
</tr>
<tr>
<td style="text-align:left">plugin</td>
<td style="text-align:left">libphxpaxos_plugin.a</td>
<td style="text-align:left">libphxpaxos.a</td>
<td style="text-align:left">glog</td>
</tr>
<tr>
<td style="text-align:left">sample/phxelection</td>
<td style="text-align:left">可执行程序</td>
<td style="text-align:left">libphxpaxos.a,libphxpaxos_plugin.a</td>
<td style="text-align:left">无</td>
</tr>
<tr>
<td style="text-align:left">sample/phxecho</td>
<td style="text-align:left">可执行程序</td>
<td style="text-align:left">libphxpaxos.a,libphxpaxos_plugin.a</td>
<td style="text-align:left">无</td>
</tr>
<tr>
<td style="text-align:left">sample/phxkv</td>
<td style="text-align:left">可执行程序</td>
<td style="text-align:left">libphxpaxos.a,libphxpaxos_plugin.a</td>
<td style="text-align:left">grpc</td>
</tr>
<tr>
<td style="text-align:left">src/ut</td>
<td style="text-align:left">单元测试</td>
<td style="text-align:left">无</td>
<td style="text-align:left">gtest,gmock</td>
</tr>
</tbody>
</table>
<p><strong>注意</strong>:  如仅需使用<code>libphxpaxos.a</code>进行开发，只需要编译leveldb和protobuf。而如果希望使用我们的glog打日志插件模块，或者想尝试编译sample目录，或用于phxsql使用，则还需要编译<code>libphxpaxos_plugin.a</code>, 这个静态库依赖了glog。</p>
<h3 id="编译-leveldb">编译 leveldb</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">进入third_party/leveldb目录。
下载 leveldb1.18版  https://github.com/google/leveldb/releases
make，编译完成后会在当前目录生成libleveldb.a文件。
mkdir lib建立一个lib目录，然后cd lib;ln -s ../libleveldb.a libleveldb.a建立一个软链，PhxPaxos通过lib这个目录来寻址静态库。
</code></pre></div><h3 id="编译-protobuf">编译 protobuf</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">进入third_party/protobuf目录。
./autogen.sh
</code></pre></div><p>出错</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">helloworld@Vostro:~/Workspace/gopath/src/github.com/bingo/phxpaxos/third_party/protobuf$ ./autogen.sh 
Google Mock not present.  Fetching gmock-1.7.0 from the web...
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  <span style="color:#bd93f9">0</span>     <span style="color:#bd93f9">0</span>    <span style="color:#bd93f9">0</span>     <span style="color:#bd93f9">0</span>    <span style="color:#bd93f9">0</span>     <span style="color:#bd93f9">0</span>      <span style="color:#bd93f9">0</span>      <span style="color:#bd93f9">0</span> --:--:--  0:02:12 --:--:--     0curl: <span style="color:#ff79c6">(</span>7<span style="color:#ff79c6">)</span> Failed to connect to googlemock.googlecode.com port 443: Connection timed out
</code></pre></div><p>​       下载[gmoock](git clone https:<em>//github.com/paulsapps/gmock-1.7.0</em> ])  到当前目录,或将third_party/目录下gmock文件夹，直接拷贝到third_party/protobuf文件夹下,再次执行 ./autogen.sh</p>
<p>出错</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&gt;&gt;&gt; configure.ac:93: error: possibly undefined macro: AC_PROG_LIBTOOL
      If this token and others are legitimate, please use m4_pattern_allow.
      See the Autoconf documentation.
&gt;&gt;&gt; autoreconf: /usr/bin/autoconf failed with <span style="color:#8be9fd;font-style:italic">exit</span> status: <span style="color:#bd93f9">1</span>
</code></pre></div><p>下载  libtool libsysfs-dev</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo  apt  install  libtool libsysfs-dev
</code></pre></div><p>再次执行 ./autogen.sh</p>
<p>如果还是报错</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">libtoolize --copy --force
</code></pre></div><p>报错</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">helloworld@Vostro:~/Workspace/gopath/src/github.com/bingo/phxpaxos/third_party/protobuf$ ./autogen.sh 
+ mkdir -p third_party/googletest/m4
+ autoreconf -f -i -Wall,no-obsolete
libtoolize: putting auxiliary files in <span style="color:#f1fa8c">&#39;.&#39;</span>.
libtoolize: copying file <span style="color:#f1fa8c">&#39;./ltmain.sh&#39;</span>
libtoolize: putting macros in AC_CONFIG_MACRO_DIRS, <span style="color:#f1fa8c">&#39;m4&#39;</span>.
libtoolize: copying file <span style="color:#f1fa8c">&#39;m4/libtool.m4&#39;</span>
libtoolize: copying file <span style="color:#f1fa8c">&#39;m4/ltoptions.m4&#39;</span>
libtoolize: copying file <span style="color:#f1fa8c">&#39;m4/ltsugar.m4&#39;</span>
libtoolize: copying file <span style="color:#f1fa8c">&#39;m4/ltversion.m4&#39;</span>
libtoolize: copying file <span style="color:#f1fa8c">&#39;m4/lt~obsolete.m4&#39;</span>
Unescaped left brace in regex is illegal here in regex; marked by &lt;-- HERE in m/<span style="color:#f1fa8c">\$</span><span style="color:#ff79c6">{</span> &lt;-- HERE <span style="color:#ff79c6">([</span>^ <span style="color:#f1fa8c">\t</span><span style="color:#ff79c6">=</span>:+<span style="color:#ff79c6">{}]</span>+<span style="color:#ff79c6">)}</span>/ at /usr/local/bin/automake line 3930.
autoreconf: automake failed with <span style="color:#8be9fd;font-style:italic">exit</span> status: <span style="color:#bd93f9">255</span>
</code></pre></div><p>原因是Perl不支持以前的写法。</p>
<p>解决方法</p>
<p>编辑提示的文件<strong>xxx</strong>的行号<strong>xxx</strong>
例如 <strong>/usr/bin/automake</strong> 第 <strong>3930</strong> 行
将  - <code>$text =~ s/\${([^ \t=:+{}]+)}/substitute_ac_subst_variables_worker ($1)/ge;</code>
修改为 - <code>$text =~ s/\$[{]([^ \t=:+{}]+)}/substitute_ac_subst_variables_worker ($1)/ge;</code></p>
<p>出现exit 0 即可</p>
<p>继续编译</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">./configure <span style="color:#8be9fd;font-style:italic">CXXFLAGS</span><span style="color:#ff79c6">=</span>-fPIC --prefix<span style="color:#ff79c6">=[</span>当前目录绝对路径<span style="color:#ff79c6">]</span>, 这一步CXXFLAGS和--prefix都必须设置对。  可直接使用./configure <span style="color:#8be9fd;font-style:italic">CXXFLAGS</span><span style="color:#ff79c6">=</span>-fPIC --prefix<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">`</span><span style="color:#8be9fd;font-style:italic">pwd</span><span style="color:#f1fa8c">`</span>
make <span style="color:#ff79c6">&amp;&amp;</span> make install
编译完成后检查是否在当前目录成功生成bin,include,lib三个子目录。
</code></pre></div><h4 id="编译-glog">编译 glog</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">进入third_party/glog目录。
./configure <span style="color:#8be9fd;font-style:italic">CXXFLAGS</span><span style="color:#ff79c6">=</span>-fPIC -prefix<span style="color:#ff79c6">=[</span>当前目录绝对路径<span style="color:#ff79c6">]</span>, 这一步CXXFLAGS和-prefix都必须设置对。
sudo  make <span style="color:#ff79c6">&amp;&amp;</span> sudo make install
编译完成检查是否在当前目录成功生成lib子目录，并检查在lib目录是否成功生成静态库libglog.a.
</code></pre></div><p>出错</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&gt;&gt;&gt; <span style="color:#8be9fd;font-style:italic">cd</span> . <span style="color:#ff79c6">&amp;&amp;</span> automake-1.14 --gnu
/bin/sh:line 4: automake-1.14: <span style="color:#8be9fd;font-style:italic">command</span> not found
make: *** <span style="color:#ff79c6">[</span>Makefile.in<span style="color:#ff79c6">]</span> error <span style="color:#bd93f9">1</span>
<span style="color:#ff79c6">[</span>root@localhost glog<span style="color:#ff79c6">]</span><span style="color:#6272a4"># make &amp;&amp; make install</span>
 <span style="color:#8be9fd;font-style:italic">cd</span> . <span style="color:#ff79c6">&amp;&amp;</span> automake-1.14 --gnu
/bin/sh:line 4: automake-1.14: <span style="color:#8be9fd;font-style:italic">command</span> not found
make: *** <span style="color:#ff79c6">[</span>Makefile.in<span style="color:#ff79c6">]</span> error <span style="color:#bd93f9">1</span>
</code></pre></div><p>安装依赖</p>
<pre tabindex="0"><code class="language-bahs" data-lang="bahs">helloworld@Vostro:~/Downdown wget http://ftp.gnu.org/gnu/automake/automake-1.14.tar.gz
helloworld@Vostro:~/Downdown wget http://ftp.gnu.org/gnu/autoconf/autoconf-2.69.tar.gz
tar xvzf autoconf-2.69.tar.gz
cd autoconf-2.69
yum -y install libtool libsysfs-dev 
./configure
make &amp;&amp; make install

tar xvzf automake-1.14.tar.gz
cd automake-1.14
./configure
make &amp;&amp; make install

automake --version
&gt;&gt;&gt; automake (GNU automake) 1.14
</code></pre><p>​      Makefile:372: recipe for target &lsquo;aclocal.m4&rsquo; failed</p>
<p>出错</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"> sudo make <span style="color:#ff79c6">&amp;&amp;</span> sudo  make  install 
 <span style="color:#8be9fd;font-style:italic">cd</span> . <span style="color:#ff79c6">&amp;&amp;</span> automake-1.14 --gnu
parallel-tests: error: required file <span style="color:#f1fa8c">&#39;./test-driver&#39;</span> not found
parallel-tests:   <span style="color:#f1fa8c">&#39;automake --add-missing&#39;</span> can install <span style="color:#f1fa8c">&#39;test-driver&#39;</span>
Makefile:928: recipe <span style="color:#ff79c6">for</span> target <span style="color:#f1fa8c">&#39;Makefile.in&#39;</span> failed
make: *** <span style="color:#ff79c6">[</span>Makefile.in<span style="color:#ff79c6">]</span> Error <span style="color:#bd93f9">1</span>
</code></pre></div><p>根据提示操作</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo automake --add-missing
sudo  aclocal-1.14
sudo  make <span style="color:#ff79c6">&amp;&amp;</span> sudo  make install
</code></pre></div><h3 id="编译-phxpaxos">编译 PhxPaxos</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">进入PhxPaxos根目录。
./autoinstall.sh
make <span style="color:#ff79c6">&amp;&amp;</span> make install <span style="color:#ff79c6">(</span>默认使用-O2编译优化参数，如需编译debug版本，则命令为make <span style="color:#8be9fd;font-style:italic">debug</span><span style="color:#ff79c6">=</span>y<span style="color:#ff79c6">)</span>
编译完成后检查是否在当前目录成功生成lib子目录，并检查在lib目录是否成功生成静态库libphxpaxos.a.
</code></pre></div><h3 id="编译-phxpaxos-plugin静态库">编译 PhxPaxos Plugin静态库</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#8be9fd;font-style:italic">cd</span> PhxPaxos/plugin
make <span style="color:#ff79c6">&amp;&amp;</span> make install
至此，PhxPaxos Plugin静态库编译成功，检查上层lib目录下是否成功生成静态库libphxpaxos_plugin.a.
</code></pre></div><h3 id="编译-gflags">编译 gflags</h3>
<p>源码已经跟随第一步下载到third_party/文件夹下，官网手册里没有编译它的步骤实乃大坑。因为不编译它，会在编译sample/phxecho中报错：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">g++: error: /home/helloworld/Workspace/gopath/src/github.com/bingo/phxpaxos/third_party/leveldb/lib/libleveldb.a: No such file or directory
Makefile:36: recipe <span style="color:#ff79c6">for</span> target <span style="color:#f1fa8c">&#39;phxecho&#39;</span> failed
make: *** <span style="color:#ff79c6">[</span>phxecho<span style="color:#ff79c6">]</span> Error 1&gt;&gt;&gt; g++: error：/root/git/phxpaxos/third_party/gflags/lib/libgflags.a：No such file or directory
</code></pre></div><p>编译</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">camke .
sudo make <span style="color:#ff79c6">&amp;&amp;</span> sudo make install  
</code></pre></div><h2 id="三个sample-运行">三个sample 运行</h2>
<h3 id="phxelection">phxelection</h3>
<p>介绍:  This is very simple sample to use phxpaxos to election.
Check the code in election.cpp, that is really simple.</p>
<p>了解选举过程</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo  make
$ ./phxelection 127.0.0.1:11111 127.0.0.1:11111,127.0.0.1:11112,127.0.0.1:11113
$ ./phxelection 127.0.0.1:11112 127.0.0.1:11111,127.0.0.1:11112,127.0.0.1:11113
$ ./phxelection 127.0.0.1:11113 127.0.0.1:11111,127.0.0.1:11112,127.0.0.1:11113
</code></pre></div><p>
  <img src="https://github.com/Wxiaote/cloudimg/blob/master/2020/02/20200219033841.png?raw=true" alt="image-20200216230700814">

</p>
<h3 id="phxecho">phxecho</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">helloworld@Vostro:~/Workspace/gopath/src/github.com/bingoaxos/sample/phxkv$ sudo  make
helloworld@Vostro:~/Workspace/gopath/src/github.com/bingoaxos/sample/phxkv$ mkdir log
<span style="color:#6272a4">#运行</span>
$ ./phxecho  127.0.0.1:11111 127.0.0.1:11111,127.0.0.1:11112,127.0.0.1:11113
$ ./phxecho  127.0.0.1:11112 127.0.0.1:11111,127.0.0.1:11112,127.0.0.1:11113
$ ./phxecho  127.0.0.1:11113 127.0.0.1:11111,127.0.0.1:11112,127.0.0.1:11113
</code></pre></div><h3 id="phxkv">phxkv</h3>
<p>直接make发现出错</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">--grpc_out: protoc-gen-grpc: Plugin failed with status code 1.
/home/helloworld/Workspace/gopath/src/github.com/bingo/phxpaxos/makefile.mk:58: recipe <span style="color:#ff79c6">for</span> target <span style="color:#f1fa8c">&#39;phxkv.grpc.pb.cc&#39;</span> failed
make: *** <span style="color:#ff79c6">[</span>phxkv.grpc.pb.cc<span style="color:#ff79c6">]</span> Error <span style="color:#bd93f9">1</span>
</code></pre></div><p>原因: 缺少第三方依赖 grpc</p>
<h3 id="编译-grpc">编译 grpc</h3>
<p>源码  <a href="https://github.com/grpc/grpc.git"> grpc源码 </a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git clone --recursive https://github.com/grpc/grpc.git
<span style="color:#8be9fd;font-style:italic">cd</span> grpc
git submodule update --init
</code></pre></div><p>编译</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">make
</code></pre></div><p>出错</p>
<ul>
<li>
<p>zlib 没有自动编译</p>
<p>检查是否第三方软件下载完全</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ git submodule update --init  发现无错误
<span style="color:#6272a4">#重新下载编译</span>
$ <span style="color:#8be9fd;font-style:italic">cd</span> third_party/
$ git clone https://github.com/madler/zlib.git
$ <span style="color:#8be9fd;font-style:italic">cd</span> zlib
$ mdkir .build
$ <span style="color:#8be9fd;font-style:italic">cd</span> .build
$ cmake ..
$ make
</code></pre></div></li>
<li>
<p>protobuf 出错</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">configure.ac:30: error: possibly undefined macro: AC_PROG_LIBTOOL       
If this token and others are legitimate, please use m4_pattern_allow.       
See the Autoconf documentation.
</code></pre></div><p>google出来的答案都是说, 安装下列软件,可是自己早下载过了,没有找到原因</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo apt install  libtool libgflags-dev libgtest-dev
</code></pre></div><p>最后使用了之前编译好的 protobuf, 神奇的坑&hellip;</p>
</li>
</ul>
<p>最后回到phxkv,运行例子</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ make 
$ sh prepare.sh
$ <span style="color:#6272a4">#sample</span>
<span style="color:#6272a4">#./phxkv_grpcserver 127.0.0.1:21111 127.0.0.1:11111 127.0.0.1:11111,127.0.0.1:11112,127.0.0.1:11113 ./storage/kvdb_0 ./storage/paxoslog_0</span>
<span style="color:#6272a4">#./phxkv_grpcserver 127.0.0.1:21112 127.0.0.1:11112 127.0.0.1:11111,127.0.0.1:11112,127.0.0.1:11113 ./storage/kvdb_1 ./storage/paxoslog_1</span>
<span style="color:#6272a4">#./phxkv_grpcserver 127.0.0.1:21113 127.0.0.1:11113 127.0.0.1:11111,127.0.0.1:11112,127.0.0.1:11113 ./storage/kvdb_2 ./storage/paxoslog_2</span>

<span style="color:#6272a4">#client 测试</span>
<span style="color:#6272a4">#./phxkv_client_tools 127.0.0.1:21112 put key_hello value_paxos 0</span>
<span style="color:#6272a4">#./phxkv_client_tools 127.0.0.1:21112 getlocal key_hello</span>
<span style="color:#6272a4">#./phxkv_client_tools 127.0.0.1:21112 getglobal key_hello</span>
<span style="color:#6272a4">#./phxkv_client_tools 127.0.0.1:21112 delete key_hello 0</span>

<span style="color:#6272a4">#./phxkv_client_tools 127.0.0.1:21111 put key_hello value_paxos 0</span>
<span style="color:#6272a4">#./phxkv_client_tools 127.0.0.1:21111 getlocal key_hello</span>
<span style="color:#6272a4">#./phxkv_client_tools 127.0.0.1:21111 getglobal key_hello</span>
<span style="color:#6272a4">#./phxkv_client_tools 127.0.0.1:21111 delete key_hello 0</span>

<span style="color:#6272a4">#./phxkv_client_tools 127.0.0.1:21113 put key_hello value_paxos 0</span>
<span style="color:#6272a4">#./phxkv_client_tools 127.0.0.1:21113 getlocal key_hello</span>
<span style="color:#6272a4">#./phxkv_client_tools 127.0.0.1:21113 getglobal key_hello</span>
<span style="color:#6272a4">#./phxkv_client_tools 127.0.0.1:21113 delete key_hello 0</span>

<span style="color:#ff79c6">[</span>注意<span style="color:#ff79c6">]</span>可能会遇到文件权限的原因,加上sudo就ok了
</code></pre></div><p>
  <img src="https://github.com/Wxiaote/cloudimg/blob/master/2020/02/20200219033817.png?raw=true" alt="image-20200219005222689">

</p>
<p>
  <img src="https://github.com/Wxiaote/cloudimg/blob/master/2020/02/20200219033909.png?raw=true" alt="image-20200219021235326">

</p>
<p>![image-20200609101441610](/home/helloworld/.config/Typora/typora-user-images/image-20200609101441610.png</p>
<h3 id="参考链接">[参考链接]</h3>
<p><a href="https://github.com/Tencent/phxpaxos">phxpaxos: https://github.com/Tencent/phxpaxos</a></p>
<p><a href="https://github.com/Tencent/phxpaxos/wiki/%E4%B8%AD%E6%96%87%E8%AF%A6%E7%BB%86%E7%BC%96%E8%AF%91%E6%89%8B%E5%86%8C">中文详细编译手册:   https://github.com/Tencent/phxpaxos/wiki/中文详细编译手册</a></p>


                

                <hr>
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/post/2019/1201/" data-toggle="tooltip" data-placement="top" title="云招聘设置">&larr;
                            上一篇</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/post/2020/1116/" data-toggle="tooltip" data-placement="top" title="archlinux 入坑|如何从零安装arclinux">下一篇
                            &rarr;</a>
                    </li>
                    
                </ul>
                
<div id="disqus-comment"></div>








<script src='//unpkg.com/valine/dist/Valine.min.js'></script>
<div id="vcomments"></div>
<script>
    new Valine({
        el: '#vcomments',
        appId: 'lU1ciVqNBif4ieLArWx54cg5-gzGzoHsz',
        appKey: 'UmqnyO4n2oG7gDEtPRJs3152',
        avatar: 'monsterid',
        placeholder: '雁留声羽人留痕，试试留下评论或者建议～～',
        visitor: true,
        
        emojiCDN: '//i0.hdslb.com/bfs/emote/',
        emojiMaps: {
          "2233娘-大笑":"16b8794be990cefa6caeba4d901b934a227ee3b8.png",
          "2233娘-吃惊":"d1628c43d35b1530c0504a643ff80b6189fa0a43.png",
          "2233娘-大哭":"476a2a60f6e337b8c0697a592e0aa82781f6b33b.png",
          "2233娘-耶":"d7178e258a0efc969b65ccc2b1322fb235f5dff4.png",
          "2233娘-卖萌":"ea893aa25355de95ab4f03c2dad3f0c58d0c159e.png",
          "2233娘-疑问":"0b41f509351958dbb63d472fec0132d1bd03bd14.png",
          "2233娘-汗":"247cd9df8cdf84b18368c21e3b2dd374e84c0927.png",
          "2233娘-困惑":"714eeb4eae0d0933b4ff08b7df788b1982f6b940.png",
          "2233娘-怒":"f31953119c51b9748016440ac0b632f779929b37.png",
          "2233娘-委屈":"d9d0bf9d358af8d5761093ec66d4e3f60d963a63.png",
          "2233娘-郁闷":"485203fe7100f2c8fc40b2800a18fe20b35f2f1a.png",
          "2233娘-第一":"3754ee6e5985bd0bd7dfb668981f2a8733398ebd.png",
          "2233娘-喝水":"695bf5429472049b52c1e0de586f8a2511195a23.png",
          "2233娘-吐魂":"e999af499edf38a91ca68b1a9d2f97042c1d6734.png",
          "2233娘-无言":"fdb5870f32cfaf7949e0f88a13f6feba4a48b719.png",
          "12周年":"8a80589462a38e04716ebcbc6c4764d9d25b1dd0.png",
          "藏狐":"ba0937ef6f3ccca85e2e0047e6263f3b4da37201.png",
          "doge":"3087d273a78ccaff4bb1e9972e2ba2a7583c9f11.png",
          "doge-春节":"feb9abf68df628803ff69a244e744470c2b7e136.png",
          "doge-圣诞":"1afb5eb96846e0876071eeecb47be95dbf55f08d.png",
          "doge-愚人节":"8ab62b33061d20bc27beec798a2f73c639e8bb6e.png",
          "微笑":"685612eadc33f6bc233776c6241813385844f182.png",
          "微笑-春节":"f32e5d367c81fbb88b54d7fe46366de04fe4f38f.png",
          "微笑-愚人节":"774d19d2416eb5b30ac66b02ac580b1b0ca92a80.png",
          "OK":"4683fd9ffc925fa6423110979d7dcac5eda297f4.png",
          "OK-春节":"ad17fceba45996104c8b8e2e3f4efd7e2f588368.png",
          "OK-圣诞":"75d1c99cce001d6d103a8fd406616be9f51621ab.png",
          "OK-愚人节":"76cc9da7f4a054cb02aad900f0ca3d3fda9c9667.png",
          "星星眼":"63c9d1a31c0da745b61cdb35e0ecb28635675db2.png",
          "星星眼-春节":"f6f01068ac7f6548779b0e16daa61974f9299b17.png",
          "星星眼-圣诞":"195641c30c55f34f9cd82c5e5c32d66a425c7723.png",
          "星星眼-愚人节":"270e85c95c1ad919848b415601ed3a879bd08127.png",
          "妙啊":"b4cb77159d58614a9b787b91b1cd22a81f383535.png",
          "妙啊-春节":"692f196da6a623a1634ea305618d37709c2c87f0.png",
          "妙啊-圣诞":"1cdb10e4b6c6743a1ec96f1579e3ef3045a8f225.png",
          "妙啊-愚人节":"5675a5d2f3e7fb6b29db0ca8c7703237a18c4271.png",
          "辣眼睛":"35d62c496d1e4ea9e091243fa812866f5fecc101.png",
          "辣眼睛-春节":"1ad7c9d351bd64332cc8520c165ee0b32a6e82fa.png",
          "辣眼睛-圣诞":"8080adfe5acdfd0b6b09bd91db24ea7334ac7b44.png",
          "辣眼睛-愚人节":"65ed9509df4d509a1cdf22e75a6d3b708f4e9afb.png",
          "吃瓜":"4191ce3c44c2b3df8fd97c33f85d3ab15f4f3c84.png",
          "吃瓜-春节":"fbd58fe2465d84d32f37800af0fe6f25711ef397.png",
          "吃瓜-圣诞":"aa6a3022e47b441c7f84d02cacc063a728a561e0.png",
          "吃瓜-愚人节":"f05344578512ef18878de01d188657fbf81d31c8.png",
          "滑稽":"d15121545a99ac46774f1f4465b895fe2d1411c3.png",
          "滑稽-春节":"e56b466b43dd6930756d5caf4c22bef4f963dd35.png",
          "滑稽-圣诞":"5874276ea716d0e9797f827dcfca4332acf8f0de.png",
          "滑稽-愚人节":"e8c1b263949c2617e6395b190d185b2f8cdf0747.png",
          "呲牙":"b5a5898491944a4268360f2e7a84623149672eb6.png",
          "呲牙-春节":"6ae3b1008d2fee7e15b5eb447b2ccff18e664b88.png",
          "呲牙-圣诞":"ae4395c1e29e9a2db0c9ccc4c0db05c414816e68.png",
          "呲牙-愚人节":"299e5867bb79f42d8553023909f42e89707cb500.png",
          "打call":"431432c43da3ee5aab5b0e4f8931953e649e9975.png",
          "打call-春节":"bf990016e43b7111cab4566dea194ba837a1a88f.png",
          "打call-圣诞":"2b04dd2d0e55d978ee485e1f7f3c5e355493ab78.png",
          "打call-愚人节":"49240d8643d7702519fc4cc468e0003a7623c0e3.png",
          "歪嘴":"4384050fbab0586259acdd170b510fe262f08a17.png",
          "歪嘴-愚人节":"6cc4c091d3f2cc540f64d8f10ffe516fd2f4ea2b.png",
          "调皮":"8290b7308325e3179d2154327c85640af1528617.png",
          "调皮-愚人节":"a09481ceb0644f799d94805446fd52dce775b022.png",
          "嗑瓜子":"28a91da1685d90124cfeead74622e1ebb417c0eb.png",
          "嗑瓜子-春节":"d2f9910f2d6e52ead3bf1ee29754cd1176f5fc2e.png",
          "笑哭":"c3043ba94babf824dea03ce500d0e73763bf4f40.png",
          "笑哭-春节":"29ce59fb7f14351d195609ef297d30e336bdb240.png",
          "脱单doge":"bf7e00ecab02171f8461ee8cf439c73db9797748.png",
          "给心心":"1597302b98827463f5b75c7cac1f29ea6ce572c4.png",
          "嘟嘟":"abd7404537d8162720ccbba9e0a8cdf75547e07a.png",
          "喜欢":"8a10a4d73a89f665feff3d46ca56e83dc68f9eb8.png",
          "酸了":"92b1c8cbceea3ae0e8e32253ea414783e8ba7806.png",
          "哦呼":"362bded07ea5434886271d23fa25f5d85d8af06c.png",
          "嫌弃":"de4c0783aaa60ec03de0a2b90858927bfad7154b.png",
          "大哭":"2caafee2e5db4db72104650d87810cc2c123fc86.png",
          "害羞":"9d2ec4e1fbd6cb1b4d12d2bbbdd124ccb83ddfda.png",
          "疑惑":"b7840db4b1f9f4726b7cb23c0972720c1698d661.png",
          "喜极而泣":"485a7e0c01c2d70707daae53bee4a9e2e31ef1ed.png",
          "奸笑":"bb84906573472f0a84cebad1e9000eb6164a6f5a.png",
          "笑":"81edf17314cea3b48674312b4364df44d5c01f17.png",
          "偷笑":"6c49d226e76c42cd8002abc47b3112bc5a92f66a.png",
          "惊讶":"f8e9a59cad52ae1a19622805696a35f0a0d853f3.png",
          "捂脸":"6921bb43f0c634870b92f4a8ad41dada94a5296d.png",
          "捂脸-圣诞":"9af59557383770c398daac81583e6c4d27d83da7.png",
          "阴险":"ba8d5f8e7d136d59aab52c40fd3b8a43419eb03c.png",
          "囧":"12e41d357a9807cc80ef1e1ed258127fcc791424.png",
          "呆":"33ad6000d9f9f168a0976bc60937786f239e5d8c.png",
          "抠鼻":"cb89184c97e3f6d50acfd7961c313ce50360d70f.png",
          "大笑":"ca94ad1c7e6dac895eb5b33b7836b634c614d1c0.png",
          "惊喜":"0afecaf3a3499479af946f29749e1a6c285b6f65.png",
          "无语":"44667b7d9349957e903b1b62cb91fb9b13720f04.png",
          "点赞":"1a67265993913f4c35d15a6028a30724e83e7d35.png",
          "鼓掌":"895d1fc616b4b6c830cf96012880818c0e1de00d.png",
          "尴尬":"cb321684ed5ce6eacdc2699092ab8fe7679e4fda.png",
          "灵魂出窍":"43d3db7d97343c01b47e22cfabeca84b4251f35a.png",
          "委屈":"d2f26cbdd6c96960320af03f5514c5b524990840.png",
          "傲娇":"010540d0f61220a0db4922e4a679a1d8eca94f4e.png",
          "疼":"905fd9a99ec316e353b9bd4ecd49a5f0a301eabf.png",
          "冷":"cb0ebbd0668640f07ebfc0e03f7a18a8cd00b4ed.png",
          "生病":"0f25ce04ae1d7baf98650986454c634f6612cb76.png",
          "吓":"9c10c5ebc7bef27ec641b8a1877674e0c65fea5d.png",
          "吐":"06946bfe71ac48a6078a0b662181bb5cad09decc.png",
          "捂眼":"c5c6d6982e1e53e478daae554b239f2b227b172b.png",
          "嘘声":"e64af664d20716e090f10411496998095f62f844.png",
          "思考":"cfa9b7e89e4bfe04bbcd34ccb1b0df37f4fa905c.png",
          "再见":"fc510306bae26c9aec7e287cdf201ded27b065b9.png",
          "翻白眼":"eba54707c7168925b18f6f8b1f48d532fe08c2b1.png",
          "哈欠":"888d877729cbec444ddbd1cf4c9af155a7a06086.png",
          "奋斗":"bb2060c15dba7d3fd731c35079d1617f1afe3376.png",
          "墨镜":"3a03aebfc06339d86a68c2d893303b46f4b85771.png",
          "难过":"a651db36701610aa70a781fa98c07c9789b11543.png",
          "撇嘴":"531863568e5668c5ac181d395508a0eeb1f0cda4.png",
          "抓狂":"4c87afff88c22439c45b79e9d2035d21d5622eba.png",
          "生气":"3195714219c4b582a4fb02033dd1519913d0246d.png",
          "口罩":"3ad2f66b151496d2a5fb0a8ea75f32265d778dd3.png",
          "牛年":"9275275ff1f2659310648221107d20bc4970f106.png",
          "2021":"14d8996128d46dabd3a2ed6c172c8af918d7a5d2.png",
          "2020":"dc709fac0d361370bcf0d36d32adb97df7c95824.png",
          "水稻":"d530fcaa5100ba12a17a79b55bad342d530c54e3.png",
          "福到了":"5de5373d354c373cf1617b6b836f3a8d53c5a655.png",
          "鸡腿":"c7860392815d345fa69c4f00ef18d67dccfbd574.png",
          "雪花":"a41813c4edf8782047e172c884ebd4507ce5e449.png",
          "视频卫星":"dce6fc7d6dfeafff01241924db60f8251cca5307.png",
          "11周年":"d3b2d5dc028c75ae4df379f4c3afbe186d0f6f9b.png",
          "十周年":"1eacd3f7816e70aff9c1b1a2e9605240466f599b.png",
          "干杯":"8da12d5f55a2c7e9778dcc05b40571979fe208e6.png",
          "爱心":"ed04066ea7124106d17ffcaf75600700e5442f5c.png",
          "锦鲤":"643d6c19c8164ffd89e3e9cdf093cf5d773d979c.png",
          "胜利":"b49fa9f4b1e7c3477918153b82c60b114d87347c.png",
          "加油":"c7aaeacb21e107292d3bb053e5abde4a4459ed30.png",
          "抱拳":"89516218158dbea18ab78e8873060bf95d33bbbe.png",
          "响指":"1b5c53cf14336903e1d2ae3527ca380a1256a077.png",
          "保佑":"fafe8d3de0dc139ebe995491d2dac458a865fb30.png",
          "支持":"3c210366a5585706c09d4c686a9d942b39feeb50.png",
          "拥抱":"41780a4254750cdaaccb20735730a36044e98ef3.png",
          "跪了":"f2b3aee7e521de7799d4e3aa379b01be032698ac.png",
          "怪我咯":"07cc6077f7f7d75b8d2c722dd9d9828a9fb9e46d.png",
          "黑洞":"e90ec4c799010f25391179118ccd9f66b3b279ba.png",
          "老鼠":"8e6fb491eb1bb0d5862e7ec8ccf9a3da12b6c155.png",
          "来古-沉思":"4ee07ff03266d62b246be0b950bebb2abf3d997c.png",
          "来古-呆滞":"9a70b365e523f2379f395031ceefcebb75a45903.png",
          "来古-疑问":"032fdc0d9d9fe6334776f6c39518a959b73b98f4.png",
          "来古-震撼":"8b40f228675602a317d32007de6b795c101135ec.png",
          "来古-注意":"4b671ba32a2581cf40e5cd41c67b111eb8010de0.png",
          "凛冬-生气":"d90bd2fbc13a3cb8d313f6d675f20caf109f60a7.png",
          "W-哈哈":"83d527303c8f62f494e6971c48836487e7d87b1b.png",
          "霜叶-疑问":"ada3aea8594e724511c1daad15fb3b23900d8e24.png",
          "煌-震撼":"7bb39ac289bc97fe52af047020a9bf324ecdebe1.png",
          "哭泣":"a61abafb8c39defc323b045f30072198007b1c89.png",
          "哈哈":"e6449b0bae13b8c97cc65976ff8cdc2c16be0015.png",
          "狗子":"6a997106af5bf490f22c80a7acf3be813ee755fc.png",
          "羞羞":"f4f9171e4d8c3f30827a8b96ea1ce1beb825ad50.png",
          "亲亲":"2f72bae7b834d499f259c833f7011d5ed8748fd1.png",
          "耍帅":"d7a38b08d1f1cc35b19c35041f29ffcc48808e87.png",
          "气愤":"069b029d17a086ab475fd331697a649e234850bb.png",
          "高兴":"416570a8aca7be12fb2c36e4b846906653f6d294.png",
          "粽子":"177999fb7d70d891fbf63b161f26b272e08dc1de.png",
          "月饼":"89b19c5730e08d6f12fadf6996de5bc2e52f81fe.png",
          "加油武汉":"eb966aaa5b690d3f9308a9f936f5b5a72a7f956b.png",
          "画风突变":"ba4de7a3f97644038b15195bdc9f82a8fd118e77.png",
          "福":"802429a301ac5b35a0480d9526a070ce67cd8097.png",
          "tv-白眼":"c1d59f439e379ee50eef488bcb5e5378e5044ea4.png",
          "tv-doge":"6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png",
          "tv-坏笑":"1f0b87f731a671079842116e0991c91c2c88645a.png",
          "tv-难过":"87f46748d3f142ebc6586ff58860d0e2fc8263ba.png",
          "tv-生气":"26702dcafdab5e8225b43ffd23c94ac1ff932654.png",
          "tv-委屈":"d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png",
          "tv-斜眼笑":"911f987aa8bc1bee12d52aafe62bc41ef4474e6c.png",
          "tv-呆":"fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png",
          "tv-发怒":"34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png",
          "tv-惊吓":"0d15c7e2ee58e935adc6a7193ee042388adc22af.png",
          "tv-呕吐":"9f996894a39e282ccf5e66856af49483f81870f3.png",
          "tv-思考":"90cf159733e558137ed20aa04d09964436f618a1.png",
          "tv-微笑":"70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png",
          "tv-疑问":"0793d949b18d7be716078349c202c15ff166f314.png",
          "tv-大哭":"23269aeb35f99daee28dda129676f6e9ea87934f.png",
          "tv-鼓掌":"1d21793f96ef4e6f48b23e53e3b9e42da833a0f6.png",
          "tv-抠鼻":"c666f55e88d471e51bbd9fab9bb308110824a6eb.png",
          "tv-亲亲":"a8111ad55953ef5e3be3327ef94eb4a39d535d06.png",
          "tv-调皮":"b9c41de8e82dd7a8515ae5e3cb63e898bf245186.png",
          "tv-笑哭":"1abc628f6d4f4caf9d0e7800878f4697abbc8273.png",
          "tv-晕":"5443c22b4d07fb1907ccc610c8e6db254f2461b7.png",
          "tv-点赞":"f85c354995bd99e28fc76c869bfe42ba6438eff4.png",
          "tv-害羞":"a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png",
          "tv-睡着":"8b196675b53af58264f383c50ad0945048290b33.png",
          "tv-色":"61822c7e9aae5da76475e7892534545336b23a6f.png",
          "tv-吐血":"09dd16a7aa59b77baa1155d47484409624470c77.png",
          "tv-无奈":"ea8ed89ee9878f2fece2dda0ea8a5dbfe21b5751.png",
          "tv-再见":"180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png",
          "tv-流汗":"cead1c351ab8d79e9f369605beb90148db0fbed3.png",
          "tv-偷笑":"bb690d4107620f1c15cff29509db529a73aee261.png",
          "tv-抓狂":"fe31c08edad661d63762b04e17b8d5ae3c71a757.png",
          "tv-黑人问号":"45821a01f51bc867da9edbaa2e070410819a95b2.png",
          "tv-困":"241ee304e44c0af029adceb294399391e4737ef2.png",
          "tv-打脸":"56ab10b624063e966bfcb76ea5dc4794d87dfd47.png",
          "tv-闭嘴":"c9e990da7f6e93975e25fd8b70e2e290aa4086ef.png",
          "tv-鄙视":"6e72339f346a692a495b123174b49e4e8e781303.png",
          "tv-腼腆":"89712c0d4af73e67f89e35cbc518420380a7f6f4.png",
          "tv-馋":"fc7e829b845c43c623c8b490ee3602b7f0e76a31.png",
          "tv-可爱":"9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png",
          "tv-发财":"34db290afd2963723c6eb3c4560667db7253a21a.png",
          "tv-生病":"8b0ec90e6b86771092a498c54f09fc94621c1900.png",
          "tv-流鼻血":"c32d39db2737f89b904ca32700d140a9241b0767.png",
          "tv-尴尬":"7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png",
          "tv-大佬":"093c1e2c490161aca397afc45573c877cdead616.png",
          "tv-流泪":"7e71cde7858f0cd50d74b0264aa26db612a8a167.png",
          "tv-冷漠":"b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png",
          "tv-皱眉":"72ccad6679fea0d14cce648b4d818e09b8ffea2d.png",
          "tv-鬼脸":"0ffbbddf8a94d124ca2f54b360bbc04feb6bbfea.png",
          "tv-调侃":"4bc022533ef31544ca0d72c12c808cf4a1cce3e3.png",
          "tv-目瞪口呆":"0b8cb81a68de5d5365212c99375e7ace3e7891b7.png",
          "tv-白眼-动图":"48f75163437445665a9be80bb316e4cb252c5415.gif",
          "tv-doge-动图":"302d6c88c63ed162c81a49cafe7ed2709e6fb955.gif",
          "tv-坏笑-动图":"5d2572efd09aab5dde9e2a198bb3f9ac1e2a982e.gif",
          "tv-难过-动图":"9c6b41008a67755410f712334c64313df5f91b3f.gif",
          "tv-生气-动图":"1902a5a2df5b5c931d88c12f0feb264b1e109d0d.gif",
          "tv-委屈-动图":"af5a5853edb43a8178a8cb5df707fa5e88143699.gif",
          "tv-斜眼笑-动图":"c66568b471192ca1f62f6ed4384dc1b283ab7508.gif",
          "tv-呆-动图":"d3fa91e4db9215eb1e20ab9da44f1214aa4bda7b.gif",
          "tv-发怒-动图":"3959eb81b952e4fa8d269d98f9e3639172d84073.gif",
          "tv-惊吓-动图":"13549060757fcd92b11d0657d9b3b6038f97abb6.gif",
          "tv-呕吐-动图":"db58e9442aae26694af18cc1683607cca3a16763.gif",
          "tv-思考-动图":"b63f9146bfd985af014f8d6d4bdb498805be48f9.gif",
          "tv-微笑-动图":"b98656855d782f61cb8edc7f7fca6563ecafff7e.gif",
          "tv-疑问-动图":"fce1b1a0f3b0e39a2dc16a18508dba7b91e929f4.gif",
          "tv-大哭-动图":"cba61f05f3039b02a7ffc0dfcd9d7995df9fdd74.gif",
          "tv-鼓掌-动图":"be106e6b265883a9f28fbe10f7b765701e2618d4.gif",
          "tv-抠鼻-动图":"696d9f93e722144dc2a78aeffc569418fdf3d565.gif",
          "tv-亲亲-动图":"3534ea44ab74bd20352b88c245a06c4b4c46d271.gif",
          "tv-调皮-动图":"fcd967395fd14e4dd5829fa7e8a967ce23205e52.gif",
          "tv-笑哭-动图":"1c2fd1e8c9dde12812f86e5d4cbddd8993d98082.gif",
          "tv-晕-动图":"030040ec5c9ddc9e3d067658c4139e7314ab42f8.gif",
          "tv-点赞-动图":"30ecff401245fb56bcc1cf588d1809ac1ab1607c.gif",
          "tv-害羞-动图":"411a3e459e8580f5bfd9f639a408247c4b509935.gif",
          "tv-睡着-动图":"3c8b5e293261287a6203597e29b3de07df4d18c6.gif",
          "tv-色-动图":"a0c6d99ab0ab63b8648f5283ff72cec04b604828.gif",
          "tv-吐血-动图":"e17e4539e169d14a3389ff147afea760cebe5de5.gif",
          "tv-无奈-动图":"eb4cb5f07cfd177c7e6a7914316717e56d9cc1d0.gif",
          "tv-再见-动图":"344f61609ecce2008520dc8a977b6169215748a9.gif",
          "tv-流汗-动图":"390bccec65eaff536bd5bb2a0c5b8b0bdea47334.gif",
          "tv-偷笑-动图":"7f11e6f7f63e79112b833bd41fa13a83d7cd8474.gif",
          "tv-抓狂-动图":"a476b93ecd8e94ac3257323fd822f91cef212de2.gif",
          "tv-黑人问号-动图":"b609adf664be33224a9923262031165ae3e34cd2.gif",
          "tv-困-动图":"91c2bf34ecf842d7016c01d841db3d4074bd281f.gif",
          "tv-打脸-动图":"b0fad4856e59c1240e448437da3287bb5ce547e5.gif",
          "tv-闭嘴-动图":"a3fc5388b09e945be3f18fe23bfed5874a0285b7.gif",
          "tv-鄙视-动图":"293b5d459e6264ecf314d20937a936fa672ccd1e.gif",
          "tv-腼腆-动图":"30984e8264324f901d19bea85dada7103b695534.gif",
          "tv-馋-动图":"2525c5703c594e5f0752f68db8948773caebde47.gif",
          "tv-可爱-动图":"f92d20f76258bc5f33fc9d7c5e2a1d41fef19a7c.gif",
          "tv-发财-动图":"76131e52c9b033681b4c896c6024d29ef7ec7ec2.gif",
          "tv-生病-动图":"beb94829fe04f1a41bd6ca611e1f6ca9ca169afa.gif",
          "tv-流鼻血-动图":"8ef473f74a849420da712487b2f56ecca1f695f5.gif",
          "tv-尴尬-动图":"e0b84ef5ee3e5b8978e584c7c5a6550c51d15f84.gif",
          "tv-大佬-动图":"14ca0c05382b8741940942b2430b7a8d55c02f7e.gif",
          "酷仔":"390100ada4659b4516984d386499fb22c0025084.png",
          "赞了":"40ded585bbd6328fc390076b5de224fd38b46793.png",
          "暗中观察":"80a752e0718db211e4135b4ba821813f4c151e2c.png",
          "么么哒":"2f418440776e88605ddc426eac898202c1f5fa4d.png",
          "哭哭":"cbf36e518f1d50618f6d054aa69993ecc339fe8f.png",
          "饿了":"ff91ea94adf7c5b04db305c18d17b444f7360059.png",
          "问号":"a905b58b32016a1f0ff7d9193b62749f0d491707.png",
          "嘿嘿":"8a15a45e228179f912ce11dbd5478f6ad54e9854.png",
          "卖萌":"a0d37b43d1e786ba811d9b0ae590c479dcce6c44.png",
          "喵":"eb46e78c9d86ccbe9842f0235c7cb4f4e0e80a57.png",
          "小电视-笑":"f80d384875183dfe2e24be13011c595c0210d273.png",
          "小电视-发愁":"05e279abbf3f72d5cc45548504a4220c5514b8b9.png",
          "小电视-赞":"86ccf6d0b5480169bf80f3582fae09d7ed455c06.png",
          "小电视-差评":"38456e3bde2839b00b536a8be13934fa57c8e298.png",
          "小电视-嘟嘴":"6fd437f547ef1e4f231ff475d02f58bb94cef5a5.png",
          "小电视-汗":"5c150cec77eae1b05d5ca46526450ff3beeb44d2.png",
          "小电视-害羞":"de3aee88f7b6cc20ba9480c96c02f83a844381a9.png",
          "小电视-吃惊":"05188008ea84c70d94e0076e28de15bf56f4c441.png",
          "小电视-哭泣":"938bdf98df945576ae88e2a22931db07ded9e663.png",
          "小电视-太太喜欢":"eb41a8c04840e4f77e76a4bff7a29ac89c432f4e.png",
          "小电视-好怒啊":"68d524b7e515396b6563d320fb710c64abfb1063.png",
          "小电视-困惑":"6853161f0eab3332b874ab7c6c0311035b7538f3.png",
          "小电视-我好兴奋":"a695fe1301aab2675ab6f6e34757c25a863a8617.png",
          "小电视-思索":"f8219e484d5a55787c3f1722dc3112d0eba03a69.png",
          "小电视-无语":"fbd12affebfdaadd3d721bffdb685a6b1ee71219.png",
          
        },
    })
</script>

            </div>

            
            
            <div class="
                col-lg-2 col-lg-offset-0
                visible-lg-block
                sidebar-container
                catalog-container">
                <div class="side-catalog">
                    <hr class="hidden-sm hidden-xs">
                    <h5>
                        <a class="catalog-toggle" href="#">目录</a>
                    </h5>
                    <ul class="catalog-body"></ul>
                </div>
            </div>
            

            
            <div class="
                col-lg-11 col-lg-offset-1
                col-md-10 col-md-offset-1
                sidebar-container">

                
                
                <section>
                    <hr class="hidden-sm hidden-xs">
                    <h5><a href="/tags/">标签/分类</a></h5>
                    <div class="tags">
                        
                        
                        
                        <a href="/tags/archlinux" title="archlinux">
                            archlinux
                        </a>
                        
                        
                        
                        <a href="/tags/ceph" title="ceph">
                            ceph
                        </a>
                        
                        
                        
                        <a href="/tags/docker" title="docker">
                            docker
                        </a>
                        
                        
                        
                        <a href="/tags/golang" title="golang">
                            golang
                        </a>
                        
                        
                        
                        <a href="/tags/phxpaxos" title="phxpaxos">
                            phxpaxos
                        </a>
                        
                        
                        
                        <a href="/tags/%E5%85%B1%E8%AF%86%E7%AE%97%E6%B3%95" title="共识算法">
                            共识算法
                        </a>
                        
                        
                        
                        <a href="/tags/%E7%AC%94%E8%AE%B0%E6%80%BB%E7%BB%93" title="笔记总结">
                            笔记总结
                        </a>
                        
                        
                        
                        <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C" title="计算机网络">
                            计算机网络
                        </a>
                        
                        
                    </div>
                </section>
                

                
                
                <section>
                    <hr>
                    <h5>友链</h5>
                    <ul class="list-inline">
                        
                        <li><a target="_blank" href="https://www.cnblogs.com/wxiaote">Wxiaote 的笔记 </a></li>
                        
                        <li><a target="_blank" href="https://github.com/wnanqun">木南的博客</a></li>
                        
                        <li><a target="_blank" href="https://jimengkui.cn/">冰华</a></li>
                        
                        <li><a target="_blank" href="https://draveness.me/">面向信仰编程</a></li>
                        
                        <li><a target="_blank" href="https://fuckcloudnative.io/">云原生实验室</a></li>
                        
                        <li><a target="_blank" href="https://zhangguanzhang.github.io/%20">zhangguanzhang&#39;s Blog</a></li>
                        
                    </ul>
                </section>
                
            </div>
        </div>
    </div>
</article>




<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                   
                   <li>
                       <a href='' rel="alternate" type="application/rss+xml" title="SeaYuns Space" >
                           <span class="fa-stack fa-lg">
                               <i class="fas fa-circle fa-stack-2x"></i>
                               <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
                           </span>
                       </a>
                   </li>
                   
                    
                    <li>
                        <a href="mailto:seayuns@163.com">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    

                    
                    
                    

                    

		    
                    
                    
                    <li>
                        <a target="_blank" href="https://github.com/seayuns">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    
                    
                    
                    
                    
                    
                    
            
            
            
                </ul>
		<p class="copyright text-muted">
                    Copyright &copy; SeaYuns Space 2022
                    <br>
                    Seayun Theme</a> by 
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="100px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=seayuns&repo=seayun&type=star&count=false" >
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>




<script>
    function loadAsync(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>






<script>
    
    if($('#tag_cloud').length !== 0){
        loadAsync("/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>


<script>
    loadAsync("https://cdn.bootcdn.net/ajax/libs/fastclick/1.0.6/fastclick.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>









<script type="text/javascript">
    function generateCatalog(selector) {

        
        
        
        
            _containerSelector = 'div.post-container'
        

        
        var P = $(_containerSelector), a, n, t, l, i, c;
        a = P.find('h1,h2,h3,h4,h5,h6');

        
        $(selector).html('')

        
        a.each(function () {
            n = $(this).prop('tagName').toLowerCase();
            i = "#" + $(this).prop('id');
            t = $(this).text();
            c = $('<a href="' + i + '" rel="nofollow">' + t + '</a>');
            l = $('<li class="' + n + '_nav"></li>').append(c);
            $(selector).append(l);
        });
        return true;
    }

    generateCatalog(".catalog-body");

    
    $(".catalog-toggle").click((function (e) {
        e.preventDefault();
        $('.side-catalog').toggleClass("fold")
    }))

    


    loadAsync('\/js\/jquery.nav.js', function () {
        $('.catalog-body').onePageNav({
            currentClass: "active",
            changeHash: !1,
            easing: "swing",
            filter: "",
            scrollSpeed: 700,
            scrollOffset: 0,
            scrollThreshold: .2,
            begin: null,
            end: null,
            scrollChange: null,
            padding: 80
        });
    });
</script>


</body>
</html>
